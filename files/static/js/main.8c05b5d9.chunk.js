(this["webpackJsonpcalendar-client"]=this["webpackJsonpcalendar-client"]||[]).push([[0],{313:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var c,r,a,s,i,o,u,l,d,b,j,m,O=n(0),h=n(33),f=n.n(h),p=n(20),v=n(14),x=n(31),_=n.n(x),k=n(355),g=Object(k.a)({PARAMS:{WINDOW_SIZE:null,SHEDULE:{REQUEST:null,SUCCESS:null,ERROR:null},SHEDULE_QUERY:{CHANGE_DAYWEEK:null,CHANGE_QUERY:null}}}).params,y=g.windowSize,N=g.shedule,w=N.request,S=N.success,E=N.error,C=g.sheduleQuery,H=C.changeDayweek,B=C.changeQuery,A=Object(k.a)({BOOKING:{ADD:null,DELETE:null},LOAD_PRICE:{REQUEST:null,SUCCESS:null,ERROR:null},SEND:{REQUEST:null,SUCCESS:null,ERROR:null}}),R=A.booking,P=R.add,T=R.delete,W=A.loadPrice,D=W.request,F=W.success,M=W.error,U=A.send,q=U.request,L=U.success,Y=U.error,z=Object(k.a)({HALLS:{REQUEST:null,SUCCESS:null,ERROR:null},HALLS_PARAMS:{CHANGE_STEP:null,CHANGE_PLACE:null},SET:{PURPOSES:null}}),I=z.halls,Q=I.request,G=I.success,K=I.error,J=z.hallsParams,V=J.changeStep,$=J.changePlace,Z=z.set.purposes,X=n(16),ee=n(29),te=n(3),ne=n(358),ce=n(43),re=Object(ne.a)(Object(te.a)({},y,(function(e,t){return t.payload})),{}),ae=Object(ne.a)((c={},Object(te.a)(c,w,(function(e){})),Object(te.a)(c,S,(function(e,t){var n=t.payload;return Object(X.a)(Object(X.a)({},n),{},{heightCell:40})})),Object(te.a)(c,E,(function(e){})),c),{}),se=Object(ne.a)((r={},Object(te.a)(r,w,(function(e){return null})),Object(te.a)(r,S,(function(e){return null})),Object(te.a)(r,E,(function(e,t){return t.payload})),r),null),ie=Object(ne.a)((a={},Object(te.a)(a,w,(function(e,t){var n=t.payload;return{date:n.date?n.date:e.date,idHall:n.idHall?n.idHall:e.idHall,purpose:n.purpose?n.purpose:e.purpose}})),Object(te.a)(a,B,(function(e,t){var n=t.payload;return{date:n.date?n.date:e.date,idHall:n.idHall?n.idHall:e.idHall,purpose:n.purpose?n.purpose:e.purpose}})),a),{}),oe=Object(ne.a)((s={},Object(te.a)(s,w,(function(e){return!0})),Object(te.a)(s,S,(function(e){return!1})),Object(te.a)(s,E,(function(e){return!1})),s),!1),ue=Object(ne.a)(Object(te.a)({},H,(function(e,t){return t.payload})),""),le=Object(ne.a)({},992),de=function(e){return e.params},be=Object(ce.a)((function(e){return e.params.shedule}),(function(e){return e.params}),(function(e,t){return t.sizeWindow<t.controlPoints?e.sheduleWork?Object(te.a)({},e.sheduleWork[t.dayweek].dateShort,Object(X.a)({},e.sheduleWork[t.dayweek])):{}:e.sheduleWork?e.sheduleWork:{}})),je=Object(ce.a)((function(e){return e.params.shedule}),(function(e){return{hours:e.prepaymentHours,percent:e.prepaymentPercent}})),me=Object(ee.b)({sizeWindow:re,shedule:ae,error:se,loading:oe,query:ie,dayweek:ue,controlPoints:le}),Oe=n(59),he=Object(ne.a)((i={},Object(te.a)(i,D,(function(e,t){return t.payload})),Object(te.a)(i,F,(function(){return{}})),Object(te.a)(i,M,(function(){return{}})),i),{}),fe=Object(ne.a)((o={},Object(te.a)(o,D,(function(){return null})),Object(te.a)(o,F,(function(){return null})),Object(te.a)(o,M,(function(e,t){return t.payload})),Object(te.a)(o,q,(function(){return null})),Object(te.a)(o,L,(function(){return null})),Object(te.a)(o,Y,(function(e,t){return t.payload})),o),null),pe=Object(ne.a)((u={},Object(te.a)(u,D,(function(){return!0})),Object(te.a)(u,F,(function(){return!1})),Object(te.a)(u,M,(function(){return!1})),Object(te.a)(u,q,(function(){return!0})),Object(te.a)(u,L,(function(){return!1})),Object(te.a)(u,Y,(function(){return!1})),u),!1),ve=Object(ne.a)((l={},Object(te.a)(l,q,(function(e,t){return t.payload})),Object(te.a)(l,L,(function(){return{}})),Object(te.a)(l,Y,(function(){return{}})),l),{}),xe=Object(ne.a)((d={},Object(te.a)(d,P,(function(e,t){var n=t.payload,c=n.date,r=n.minutes,a=n.minutesStep,s=n.idHall,i=Object.keys(e).filter((function(t){return e[t].date===n.date&&e[t].idHall===s&&(n.minutes-e[t].minutes===-1*n.minutesStep||n.minutes-(e[t].minutes+e[t].minutesBusy-n.minutesStep)===n.minutesStep)})),o={date:c,minutes:r,minutesBusy:a,idHall:s,persons:1,purpose:n.purpose};return i.forEach((function(t){var c=Number(e[t].minutesBusy)+Number(o.minutesBusy),r=o.minutes>e[t].minutes?Object(X.a)({},e[t]):Object(X.a)({},o);o=Object(Oe.a)(o,(function(e){e.date=r.date,e.minutes=r.minutes,e.minutesBusy=c,e.idHall=s,e.purpose=n.purpose}))})),Object(Oe.a)(e,(function(e){i.forEach((function(t){delete e[t]})),e["".concat(o.date,"-").concat(o.minutes)]=o}))})),Object(te.a)(d,T,(function(e,t){var n=t.payload;return Object(Oe.a)(e,(function(e){delete e[n]}))})),Object(te.a)(d,F,(function(e,t){var n=t.payload,c=n.value;return n.refresh?c.key?Object(Oe.a)(e,(function(e){e[c.key].price=c.price,e[c.key].priceText=c.priceText,e[c.key].discount=c.discount,e[c.key].discountText=c.discountText,e[c.key].purposeText=c.purposeText,e[c.key].timeRange=c.timeRange,e[c.key].timeBusy=c.timeBusy})):e:Object(Oe.a)(e,(function(e){delete e["".concat(c.date,"-").concat(c.minutes)]}))})),Object(te.a)(d,D,(function(e,t){var n=t.payload,c=Object.keys(e).filter((function(t){var c=e[t].minutes,r=c+e[t].minutesBusy;return n.minutes>=c&&n.minutes<r&&e[t].date===n.date}))[0];return Object(Oe.a)(e,(function(e){e[c].persons=n.persons}))})),d),{}),_e=function(e){return e.booking},ke=Object(ce.a)((function(e){return e.booking.selected}),(function(e){return Object.keys(e).length})),ge=function(e,t){var n=Math.floor(e/t),c=e-n*t;return"".concat((n=24===n?"0":n).toString().padStart(2,"0"),":").concat(c.toString().padStart(2,"0"))},ye=Object(ce.a)((function(e){return e.booking.selected}),(function(e){return e.params.shedule}),(function(e,t){var n=t.hourSize,c=t.minutesStep,r=t.heightCell,a=Object.keys(e).map((function(t){var a=e[t],s=a.minutes,i=a.minutesBusy,o=ge(s,n),u=ge(s+i,n),l=Math.ceil(i/c)*r;return[t,Object(X.a)(Object(X.a)({},e[t]),{},{rangeTime:"".concat(o,"-").concat(u),heightBusy:l})]}));return Object.fromEntries(a)})),Ne=Object(ce.a)((function(e){return e.booking.selected}),(function(e){var t=Object.keys(e),n=0,c=0;return t.forEach((function(t){n+=e[t].price?e[t].price:0,c+=e[t].discount?e[t].discount:0})),{price:n,discount:c,bookingCount:t.length,priceFormat:n.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 "),discountFormat:c.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}})),we=Object(ee.b)({selected:xe,error:fe,loading:pe,form:ve,params:he}),Se=Object(ne.a)((b={},Object(te.a)(b,Q,(function(e){return[]})),Object(te.a)(b,G,(function(e,t){return t.payload})),Object(te.a)(b,K,(function(e){return[]})),b),[]),Ee=Object(ne.a)((j={},Object(te.a)(j,Q,(function(e){return null})),Object(te.a)(j,G,(function(e){return null})),Object(te.a)(j,K,(function(e,t){return t.payload})),j),null),Ce=Object(ne.a)((m={},Object(te.a)(m,Q,(function(e){return!0})),Object(te.a)(m,G,(function(e){return!1})),Object(te.a)(m,K,(function(e){return!1})),m),!1),He=Object(ne.a)(Object(te.a)({},V,(function(e,t){return t.payload})),4),Be=Object(ne.a)(Object(te.a)({},$,(function(e,t){return t.payload})),0),Ae=Object(ne.a)(Object(te.a)({},Z,(function(e,t){return t.payload})),[]),Re=Object(ce.a)((function(e){return e.halls.list}),(function(e){return e.halls.hallsStep}),(function(e){return e.halls.hallsPlace}),(function(e){return e.halls.purposes[e.params.query.purpose]}),(function(e,t,n,c){var r=c?c.list:[];return{list:e.filter((function(e,c){return c>=n&&c<n+t&&r.includes(e._id)})),firstActiveBtn:n<=0,lastActiveBtn:e.length<=n+t,showBtns:e.length>t}})),Pe=Object(ce.a)((function(e){return e.halls.list}),(function(e){return e.booking.selected}),(function(e,t){var n=Object.keys(t),c=e.reduce((function(e,t){return e[t._id]=t,e}),{}),r={};return n.forEach((function(e){var n=t[e].idHall;r[n]?r[n].list.push(Object(X.a)({},t[e])):r[n]=Object(X.a)(Object(X.a)({},c[n]),{},{list:[Object(X.a)({},t[e])]})})),r})),Te=Object(ee.b)({list:Se,error:Ee,loading:Ce,hallsStep:He,hallsPlace:Be,purposes:Ae}),We=Object(ee.b)({params:me,booking:we,halls:Te}),De=n(1),Fe=function(e){var t=e.today,n=Object(p.b)(),c=Object(p.c)((function(e){return de(e)})),r=c.query,a=c.loading,s=c.shedule,i=c.dayweek,o=c.sizeWindow,u=c.controlPoints,l=Object(p.c)((function(e){return _e(e)})).loading,d=Object(p.c)((function(e){return be(e)})),b=Object(p.c)((function(e){return ye(e)})),j=s.sheduleWork?s.sheduleWork:{},m=s.minutesStep?s.minutesStep:0,O=Object.keys(d),h=Object.keys(j),f=function(e,t){return function(){r.idHall===t&&n(T(e))}},v=d[O[0]]?Object.values(d[O[0]].list):[];return Object(De.jsxs)(De.Fragment,{children:[Object(De.jsxs)("div",{className:"shedule",children:[Object(De.jsxs)("div",{className:"shedule__head-row",children:[Object(De.jsx)("div",{className:"shedule__time-scale"}),h.map((function(e){return Object(De.jsx)("div",{className:"shedule__head-wrap",children:Object(De.jsx)("div",{className:"shedule__head ".concat(t===e?"shedule--head-active":""," ").concat(i===e?"shedule--head-active-click":""),onClick:(c=e,function(){o<u&&n(H(c))}),children:j[e].dayWeek})},e);var c})),Object(De.jsx)("div",{className:"shedule__time-scale"})]}),Object(De.jsxs)("div",{className:"shedule__row",children:[Object(De.jsx)(qe,{minutesStep:m,timeArr:v,className:"shedule__time-scale"}),O.map((function(e){var t=Object.keys(d[e].list),c=t.length;return Object(De.jsx)("div",{className:"shedule__column",children:Object(De.jsx)("div",{className:"shedule__column-body",children:t.map((function(t,a){var s,i,o,u=d[e].list[t],l=b["".concat(e,"-").concat(u.minutes)],j=!!b&&l,O=!!l&&{height:30===m?l.heightBusy/2:l.heightBusy};return c===a+1?Object(De.jsx)("div",{},t):Object(De.jsxs)("div",{className:"shedule__item ".concat(30===m?"shedule--item-half":"","  ").concat(30===m&&"30"!==u.timeM?"shedule--item-btn-half":""),children:[u.busy?"":Object(De.jsx)("button",{className:"shedule__item-btn","data-value":"".concat(d[e].dayWeek," / ").concat(u.timeH,":").concat(u.timeM),onClick:(s=e,i=u,o=d[e].idHall,function(){i.busy||(n(P(Object(X.a)(Object(X.a)({},i),{},{date:s,minutesStep:m,idHall:o,purpose:r.purpose}))),n(D(Object(X.a)(Object(X.a)({},i),{},{date:s,minutes:i.minutes,persons:1,minutesStep:m,idHall:o,purpose:r.purpose}))))})}),j&&Object(De.jsxs)("div",{className:"shedule__item-active shedule--item-column ".concat(l.idHall!==r.idHall?"shedule--item-no-active":""),style:O,onClick:f("".concat(e,"-").concat(u.minutes),l.idHall),children:[Object(De.jsx)("div",{className:"shedule__range-time",children:l.rangeTime}),Object(De.jsxs)("div",{className:"shedule__price",children:[l.priceText," \u0440\u0443\u0431."]})]})]},t)}))})},e)})),Object(De.jsx)(qe,{minutesStep:m,timeArr:v,className:"shedule__time-scale"})]})]}),a||l&&Object(De.jsx)(Ue,{})]})},Me=n.p+"static/media/refresh.71d8f7d8.svg",Ue=function(){return Object(De.jsx)("div",{className:"loading",children:Object(De.jsx)("div",{className:"loading__wrap",children:Object(De.jsx)("img",{src:Me,className:"loading__icon",alt:""})})})},qe=function(e){var t=e.timeArr,n=e.className,c=e.minutesStep;return Object(De.jsx)("div",{className:"time-scale ".concat(n),children:t.map((function(e){return Object(De.jsx)("div",{className:"time-scale__item ".concat(30===c?"time-scale--item-half":""),children:(30!==c||"30"!==e.timeM)&&Object(De.jsxs)("div",{className:"time-scale__wrap",children:[Object(De.jsx)("span",{className:"time-scale__hours",children:"24"===e.timeH?"00":e.timeH}),Object(De.jsx)("span",{className:"time-scale__minutes",children:e.timeM})]})},e.minutes)}))})},Le="https://calendar-kamorka.ru/",Ye="DD.MM.YYYY",ze=function(e){var t=e.children,n=Object(p.b)(),c=Object(p.c)((function(e){return de(e)})).shedule,r=_()(c.firstDate,Ye).isSameOrBefore(_()()),a=function(e){return function(){var t=_()(c.firstDate,Ye);switch(e){case"today":t=_()();break;case"inc":t.add(7,"days");break;case"dec":t.subtract(7,"days")}r&&"dec"===e||(n(H(t.format(Ye))),n(w({date:t.format(Ye)})))}};return Object(De.jsxs)("div",{className:"shedule-top",children:[Object(De.jsx)("h3",{className:"shedule-top__header",children:t}),Object(De.jsxs)("div",{className:"shedule-top__wrap",children:[Object(De.jsx)("button",{className:"shedule-top__today",onClick:a("today"),children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(De.jsxs)("div",{className:"shedule-top__nav",children:[Object(De.jsx)(Qe,{typeBtn:"left",isActive:!r,onClick:a("dec")}),Object(De.jsx)(Qe,{typeBtn:"right",isActive:!0,onClick:a("inc")})]}),Object(De.jsx)("div",{className:"shedule-top__date",children:c.rangeDate})]})]})},Ie=function(e){var t=e.children,n=Object(p.b)(),c=Object(p.c)((function(e){return e.halls})),r=c.loading,a=c.hallsStep,s=c.hallsPlace,i=c.purposes,o=Object(p.c)((function(e){return Re(e)})),u=o.list,l=o.firstActiveBtn,d=o.lastActiveBtn,b=o.showBtns,j=Object(p.c)((function(e){return de(e)})).query,m=j.idHall,O=j.purpose,h=function(e){return function(){n(w({idHall:e}))}},f=function(e){return function(){n(w({purpose:e}))}},v=function(e){return function(){e<0&&l||e>0&&d||n($(s+e))}};return Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)("div",{className:"purposes",children:Object.values(i).map((function(e){return Object(De.jsx)("div",{onClick:f(e.value),className:"purposes__item ".concat(O===e.value?"purposes--active":""),children:e.name},e.value)}))}),Object(De.jsxs)("div",{className:"halls",children:[Object(De.jsx)("h3",{className:"halls__header",children:t}),Object(De.jsx)("div",{className:"halls__list",children:u&&u.map((function(e){var t=e._id,n=e.name,c=e.cover;return Object(De.jsx)("div",{className:"halls__item-wrap",children:Object(De.jsxs)("div",{className:"halls__item ".concat(m===t?"halls--active":""),onClick:h(t),children:[Object(De.jsx)("div",{className:"halls__image",children:Object(De.jsx)("img",{className:"halls__img",src:"".concat(Le).concat(c?c.pathResize:"./files/common/no-image-340x200.jpg"),alt:""})}),Object(De.jsx)("div",{className:"halls__name",children:n})]})},t)}))}),b&&Object(De.jsxs)("div",{className:"halls__btns-arrow",children:[Object(De.jsx)(Qe,{typeBtn:"left",isActive:!l,onClick:v(-1*a)}),Object(De.jsx)(Qe,{typeBtn:"right",isActive:!d,onClick:v(a)})]})]}),r&&Object(De.jsx)(Ue,{})]})},Qe=function(e){var t=e.typeBtn,n=e.isActive,c=e.onClick,r=e.className;return Object(De.jsx)("button",{className:"arrow-btn arrow-btn--".concat(t," ").concat(n?"":"arrow-btn--no-active"," ").concat(r||""),onClick:c})},Ge=n(362),Ke=function(e){var t=e.handleClickShowForm,n=Object(p.c)((function(e){return Ne(e)}));return n.bookingCount>0&&Object(De.jsxs)("div",{className:"booking-order-info",children:[Object(De.jsxs)("div",{className:"booking-order-info__item booking-order-info--count",children:["\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432: ",n.bookingCount]}),Object(De.jsxs)("div",{className:"booking-order-info__item booking-order-info--info",children:["\u0417\u0430 \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c ",5]}),Object(De.jsxs)("div",{className:"booking-order-info__item",children:[Object(De.jsxs)("div",{className:"booking-order-info__price",children:[n.priceFormat," \u0440\u0443\u0431."]}),Object(De.jsxs)("div",{className:"booking-order-info__price-discount",children:["\u0412\u043a\u043b\u044e\u0447\u0430\u044f \u0441\u043a\u0438\u0434\u043a\u0443 ",n.discountFormat," \u0440\u0443\u0431."]})]}),Object(De.jsx)("div",{className:"booking-order-info__item",children:Object(De.jsx)(Ge.a,{onClick:t,variant:"contained",children:"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})},Je=n(354),Ve=n(164),$e=n(60),Ze=n(162),Xe=n.n(Ze),et=n(163),tt=n.n(et),nt=n(357),ct=n(361),rt=n(359),at=$e.a({firstName:$e.b("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f").min(2,"\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0431\u0443\u043a\u0432\u044b").required("\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),phone:$e.b("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0422\u0435\u043b\u0435\u0444\u043e\u043d").required("\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),mail:$e.b("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email").required("\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),comment:$e.b("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),typePay:$e.b("\u0422\u0438\u043f \u043e\u043f\u043b\u0430\u0442\u044b")}),st=function(e){var t=e.handleClickShowForm,n=e.setShowBookingForm,c=Object(p.b)(),r=Object(p.c)((function(e){return Ne(e)})),a=Object(p.c)((function(e){return ke(e)})),s=Object(p.c)((function(e){return _e(e)})).loading,i=Object(p.c)((function(e){return je(e)})),o=Object(p.c)((function(e){return Pe(e)})),u=Object.keys(o),l=Object(Ve.a)({initialValues:{firstName:"",phone:"",mail:"",comment:"",typePay:"percent"},validationSchema:at,onSubmit:function(e){var t=_()(new Date);c(q(Object(X.a)(Object(X.a)({},e),{},{dateOrder:t})))}}),d=function(e){return function(){c(T("".concat(e.date,"-").concat(e.minutes))),a<=1&&n(!1)}};return Object(De.jsxs)(De.Fragment,{children:[Object(De.jsxs)("div",{className:"booking-order-form",children:[Object(De.jsxs)("div",{className:"booking-order-form__top",children:[Object(De.jsx)("div",{className:"booking-order-form__name",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(De.jsx)(Ge.a,{onClick:t,variant:"outlined",children:"\u041d\u0430\u0437\u0430\u0434"})]}),Object(De.jsx)("div",{className:"booking-order-form__header",children:"\u0411\u0440\u043e\u043d\u044c \u0444\u043e\u0442\u043e\u0441\u0442\u0443\u0434\u0438\u0438 KAMORKA.STUDIO \u0424\u041e\u0422\u041e | \u0412\u0418\u0414\u0415\u041e | \u041f\u0420\u041e\u0421\u0422\u0420\u0410\u041d\u0421\u0422\u0412\u041e"}),Object(De.jsx)("div",{className:"booking-order-form__halls",children:u.map((function(e){return Object(De.jsxs)("div",{className:"booking-order-form__halls-item",children:[Object(De.jsx)("div",{className:"booking-order-form__halls-name",children:o[e].name}),Object(De.jsx)("div",{className:"booking-order-form__booking",children:o[e].list.map((function(e){return Object(De.jsxs)("div",{className:"booking-order-form__booking-item",children:[Object(De.jsxs)("div",{className:"booking-order-form__booking-item-left",children:[e.date," ",e.timeRange,",",e.timeBusy," (\u0434\u043b\u044f ",e.purposeText,")"]}),Object(De.jsxs)("div",{className:"booking-order-form__booking-item-right",children:[Object(De.jsxs)("div",{className:"booking-order-form__booking-right-price",children:[e.priceText," \u0440\u0443\u0431."]}),Object(De.jsx)("div",{className:"booking-order-form__booking-right-persons",children:Object(De.jsx)(Je.a,{type:"number",InputProps:{inputProps:{min:1}},label:"\u043a\u043e\u043b-\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a",variant:"standard",defaultValue:e.persons,onChange:(t=e,function(e){var n=e.target,r=Object(X.a)(Object(X.a)({},t),{},{persons:Number(n.value)});c(D(r))})})}),Object(De.jsx)(tt.a,{className:"booking-order-form__delete",onClick:d(e)})]})]},"".concat(e.minutes).concat(e.date));var t}))})]},e)}))}),Object(De.jsxs)("div",{className:"booking-order-form__total",children:["\u0418\u0442\u043e\u0433\u043e: ",r.priceFormat," \u0440\u0443\u0431.",Object(De.jsxs)("div",{className:"booking-order-form__total-discount",children:["\u0412\u043a\u043b\u044e\u0447\u0430\u044f \u0441\u043a\u0438\u0434\u043a\u0443 ",r.discountFormat," \u0440\u0443\u0431."]})]}),Object(De.jsx)("div",{className:"booking-order-form__fields",children:Object(De.jsxs)("form",{className:"form-box",onSubmit:l.handleSubmit,children:[Object(De.jsxs)("div",{className:"form-box__row",children:[Object(De.jsx)("div",{className:"form-box__item",children:Object(De.jsx)(Je.a,{fullWidth:!0,id:"firstName",name:"firstName",label:"\u0418\u043c\u044f",value:l.values.firstName,onChange:l.handleChange,error:l.touched.firstName&&Boolean(l.errors.firstName),helperText:l.touched.firstName&&l.errors.firstName})}),Object(De.jsx)("div",{className:"form-box__item",children:Object(De.jsx)(Xe.a,{mask:"+7 (999) 999-99-99",value:l.values.phone,onChange:l.handleChange,disabled:!1,error:l.touched.phone&&Boolean(l.errors.phone),helperText:l.touched.phone&&l.errors.phone,children:Object(De.jsx)(Je.a,{fullWidth:!0,id:"phone",name:"phone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"})})}),Object(De.jsx)("div",{className:"form-box__item",children:Object(De.jsx)(Je.a,{fullWidth:!0,id:"mail",name:"mail",label:"E-mail",value:l.values.mail,onChange:l.handleChange,error:l.touched.mail&&Boolean(l.errors.mail),helperText:l.touched.mail&&l.errors.mail})})]}),Object(De.jsx)("div",{className:"form-box__item-row",children:Object(De.jsx)(Je.a,{fullWidth:!0,id:"comment",multiline:!0,name:"comment",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",value:l.values.comment,onChange:l.handleChange,error:l.touched.comment&&Boolean(l.errors.comment),helperText:l.touched.comment&&l.errors.comment})}),Object(De.jsxs)("div",{className:"form-box__info",children:["\u0412 \u0442\u0435\u0447\u0435\u043d\u0438\u0438 ",i.hours," ",i.hours>1?"\u0447\u0430\u0441\u043e\u0432":"\u0447\u0430\u0441\u0430"," \u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u043f\u043b\u0430\u0442\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u0432 \u0440\u0430\u0437\u043c\u0435\u0440\u0435 \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 ",i.percent,"%. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043c\u0435\u043d\u0435\u043d."]}),i.percent<100?Object(De.jsxs)("div",{className:"form-box__item-row",children:[Object(De.jsx)("div",{className:"form-box__head",children:"\u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0432\u0430\u0448\u0435\u0433\u043e \u0432\u044b\u0431\u043e\u0440\u0430 \u0431\u0443\u0434\u0435\u0442 \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d \u0441\u0447\u0435\u0442 \u043d\u0430 \u043e\u043f\u043b\u0430\u0442\u0443 \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u0412\u0430\u043c\u0438 \u043f\u043e\u0447\u0442\u0443."}),Object(De.jsxs)(ct.a,{value:l.values.typePay,name:"typePay",id:"typePay",onChange:l.handleChange,children:[Object(De.jsx)(rt.a,{value:"percent",control:Object(De.jsx)(nt.a,{}),label:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c \u043f\u0440\u0435\u0434\u043e\u043f\u043b\u0430\u0442\u0443 \u0432 \u0440\u0430\u0437\u043c\u0435\u0440\u0435 ".concat(i.percent,"% - ").concat(Math.ceil(r.price/100*i.percent).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")," \u0440\u0443\u0431.")}),Object(De.jsx)(rt.a,{value:"full",control:Object(De.jsx)(nt.a,{}),label:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c \u0432\u0441\u044e \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c - ".concat(r.priceFormat," \u0440\u0443\u0431.")})]})]}):"",Object(De.jsx)("div",{className:"form-box__bottom",children:Object(De.jsx)(Ge.a,{variant:"outlined",color:"primary",type:"submit",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"})})]})})]}),s&&Object(De.jsx)(Ue,{})]})};function it(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var ot=function(){var e=Object(O.useState)(!1),t=Object(v.a)(e,2),n=t[0],c=t[1],r=Object(p.b)(),a=_()().format(Ye),s=Object(p.c)((function(e){return de(e)})).controlPoints,i=function(){var e=Object(O.useState)(it()),t=Object(v.a)(e,2),n=t[0],c=t[1];return Object(O.useEffect)((function(){function e(){c(it())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}(),o=i.width,u=function(){return c(!n)};return Object(O.useEffect)((function(){r(y(o)),r(V(o<s?1:4)),r(H(a)),r(Q())}),[r,a,o,s]),Object(De.jsxs)("div",{className:"content-main",children:[!n&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Ie,{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043b"}),Object(De.jsx)(ze,{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f"}),Object(De.jsx)(Fe,{today:a}),Object(De.jsx)(Ke,{handleClickShowForm:u})]}),n&&Object(De.jsx)(st,{handleClickShowForm:u,setShowBookingForm:c})]})},ut=n(166),lt=n(24),dt=n.n(lt),bt=n(18),jt=n(119),mt=n(120),Ot=n.n(mt),ht=function(){var e=Object(jt.a)(dt.a.mark((function e(t){var n,c;return dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ot.a.get(t);case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response.data;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=Object(jt.a)(dt.a.mark((function e(t,n){var c,r;return dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ot.a.post(t,Object(X.a)({},n));case 3:return c=e.sent,r=c.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response.data;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),pt=dt.a.mark(xt),vt=dt.a.mark(_t);function xt(){var e,t,n,c,r,a,s,i;return dt.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(bt.d)(de);case 3:return e=o.sent,t=e.query,o.next=7,Object(bt.d)(Re);case 7:if(n=o.sent,c=n.list,r=0===c.filter((function(e){return e._id===t.idHall})).length,a=c[0]?c[0]._id:"",!r||!a){o.next=14;break}return o.next=14,Object(bt.c)(B({idHall:a}));case 14:return s=r&&a?Object(X.a)(Object(X.a)({},t),{},{idHall:a}):t,o.next=17,Object(bt.a)(ft,"".concat(Le,"api/booking-plan-week"),s);case 17:return i=o.sent,o.next=20,Object(bt.c)(S(i));case 20:o.next=26;break;case 22:return o.prev=22,o.t0=o.catch(0),o.next=26,Object(bt.c)(E(o.t0));case 26:case"end":return o.stop()}}),pt,null,[[0,22]])}function _t(){return dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(bt.e)(w,xt);case 2:case"end":return e.stop()}}),vt)}var kt=dt.a.mark(yt),gt=dt.a.mark(Nt);function yt(){var e,t,n;return dt.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,e=_()().format(Ye),c.next=4,Object(bt.a)(ht,"".concat(Le,"api/halls"));case 4:return t=c.sent,c.next=7,Object(bt.a)(ht,"".concat(Le,"api/halls-purpose"));case 7:return n=c.sent,c.next=10,Object(bt.c)(w({date:e,idHall:document.getElementById("root").getAttribute("data-num-room"),purpose:Object.keys(n)[0]}));case 10:return c.next=12,Object(bt.c)(Z(n));case 12:return c.next=14,Object(bt.c)(G(t));case 14:c.next=20;break;case 16:return c.prev=16,c.t0=c.catch(0),c.next=20,Object(bt.c)(K(c.t0));case 20:case"end":return c.stop()}}),kt,null,[[0,16]])}function Nt(){return dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(bt.e)(Q,yt);case 2:case"end":return e.stop()}}),gt)}var wt=dt.a.mark(Ct),St=dt.a.mark(Ht),Et=dt.a.mark(Bt);function Ct(){var e,t,n,c,r,a,s;return dt.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(bt.d)(_e);case 3:if(e=i.sent,t=e.selected,n=e.params,!((c=Object.keys(t)).length>5)){i.next=12;break}return i.next=10,Object(bt.c)(F({value:n,refresh:!1}));case 10:i.next=19;break;case 12:return r=c.filter((function(e){var c=t[e].minutes,r=c+t[e].minutesBusy;return n.minutes>=c&&n.minutes<r&&t[e].date===n.date}))[0],a=Object(X.a)(Object(X.a)({},t[r]),{},{key:r}),i.next=16,Object(bt.a)(ft,"".concat(Le,"api/booking-price"),Object(X.a)({},a));case 16:return s=i.sent,i.next=19,Object(bt.c)(F({value:s,refresh:!0}));case 19:i.next=25;break;case 21:return i.prev=21,i.t0=i.catch(0),i.next=25,Object(bt.c)(M(i.t0));case 25:case"end":return i.stop()}}),wt,null,[[0,21]])}function Ht(){var e,t,n,c,r,a,s,i,o;return dt.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,Object(bt.d)(_e);case 3:return e=u.sent,t=e.form,u.next=7,Object(bt.d)(Ne);case 7:return n=u.sent,c=n.price,u.next=11,Object(bt.d)(_e);case 11:return r=u.sent,a=r.selected,s=_()(t.dateOrder).format("DD.MM.YYYY HH:mm"),u.next=16,Object(bt.a)(ft,"".concat(Le,"api/booking-add-orders"),Object(X.a)(Object(X.a)({},t),{},{price:c,selected:a,dateOrderFormat:s}));case 16:return i=u.sent,u.next=19,Object(bt.a)(ft,"".concat(Le,"api/booking-fetch"),{listOrders:i,price:c,form:Object(X.a)({},t)});case 19:return(o=u.sent).error?alert("\u0417\u0430\u043a\u0430\u0437 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043d\u043e \u0441 \u043e\u043f\u043b\u0430\u0442\u043e\u0439 \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u043d\u0430\u043c\u0438 \u0434\u043b\u044f \u043e\u043f\u043b\u0430\u0442\u044b \u0443\u043a\u0430\u0437\u0430\u0432 \u043f\u0440\u0438\u0447\u0438\u043d\u0443"):window.location.href=o.invoice_url,u.next=23,Object(bt.c)(L(i));case 23:u.next=29;break;case 25:return u.prev=25,u.t0=u.catch(0),u.next=29,Object(bt.c)(Y(u.t0));case 29:case"end":return u.stop()}}),St,null,[[0,25]])}function Bt(){return dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(bt.e)(D,Ct);case 2:return e.next=4,Object(bt.e)(q,Ht);case 4:case"end":return e.stop()}}),Et)}var At=dt.a.mark(Rt);function Rt(){return dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(bt.b)(_t);case 2:return e.next=4,Object(bt.b)(Nt);case 4:return e.next=6,Object(bt.b)(Bt);case 6:case"end":return e.stop()}}),At)}var Pt=ee.c,Tt=function(e){var t=Object(ut.a)(),n=Object(ee.d)(We,e,Pt(Object(ee.a)(t)));return t.run(Rt),n}({});n(313);f.a.render(Object(De.jsx)(p.a,{store:Tt,children:Object(De.jsx)(ot,{})}),document.getElementById("root"))}},[[314,1,2]]]);
//# sourceMappingURL=main.8c05b5d9.chunk.js.map